<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-commerce Data Platform - Grafana Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #111217;
            color: #d8d9da;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 13px;
        }

        /* Grafana-style Top Bar */
        .top-bar {
            background: #1a1b1f;
            border-bottom: 1px solid #2c2d33;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .top-bar .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .top-bar .logo svg { width: 28px; height: 28px; }
        .top-bar .title {
            font-size: 16px;
            font-weight: 600;
            color: #fff;
        }
        .top-bar .time-range {
            background: #2c2d33;
            border: 1px solid #3d3e45;
            border-radius: 4px;
            padding: 5px 12px;
            color: #d8d9da;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .top-bar .time-range .icon { color: #6e9fff; }

        /* Dashboard Grid */
        .dashboard {
            padding: 8px;
            display: grid;
            gap: 8px;
        }
        .row {
            display: grid;
            gap: 8px;
        }
        .row-4 { grid-template-columns: repeat(4, 1fr); }
        .row-3 { grid-template-columns: repeat(3, 1fr); }
        .row-2 { grid-template-columns: 1fr 1fr; }
        .row-2-1 { grid-template-columns: 2fr 1fr; }
        .row-1-2 { grid-template-columns: 1fr 2fr; }

        /* Panel */
        .panel {
            background: #181b1f;
            border: 1px solid #2c2d33;
            border-radius: 4px;
            overflow: hidden;
        }
        .panel-header {
            padding: 8px 12px;
            font-size: 13px;
            font-weight: 500;
            color: #ccccdc;
            border-bottom: 1px solid #2c2d33;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .panel-header .subtitle {
            font-size: 11px;
            color: #8e8ea0;
            font-weight: 400;
        }
        .panel-body {
            padding: 12px;
            position: relative;
        }

        /* Stat Panels */
        .stat-panel .panel-body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 16px 12px;
            min-height: 100px;
        }
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            line-height: 1.1;
        }
        .stat-label {
            font-size: 12px;
            color: #8e8ea0;
            margin-top: 4px;
        }
        .stat-trend {
            font-size: 12px;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .stat-trend.up { color: #73bf69; }
        .stat-trend.down { color: #f2495c; }
        .stat-trend.neutral { color: #ff9830; }

        .green { color: #73bf69; }
        .red { color: #f2495c; }
        .blue { color: #6e9fff; }
        .yellow { color: #ffcb47; }
        .orange { color: #ff9830; }
        .purple { color: #b877d9; }

        /* Chart containers */
        .chart-container {
            position: relative;
            height: 200px;
            width: 100%;
        }
        .chart-container.tall {
            height: 260px;
        }

        /* Table */
        .quality-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }
        .quality-table th {
            background: #22252a;
            color: #8e8ea0;
            padding: 8px 10px;
            text-align: left;
            font-weight: 500;
            border-bottom: 1px solid #2c2d33;
        }
        .quality-table td {
            padding: 7px 10px;
            border-bottom: 1px solid #22252a;
        }
        .quality-table tr:hover { background: #22252a; }

        .badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: 600;
        }
        .badge-pass { background: rgba(115, 191, 105, 0.15); color: #73bf69; }
        .badge-warn { background: rgba(255, 152, 48, 0.15); color: #ff9830; }
        .badge-fail { background: rgba(242, 73, 92, 0.15); color: #f2495c; }

        /* Funnel */
        .funnel { padding: 8px 0; }
        .funnel-step {
            display: flex;
            align-items: center;
            margin: 4px 0;
            position: relative;
        }
        .funnel-bar-bg {
            position: absolute;
            height: 28px;
            background: rgba(110, 159, 255, 0.08);
            border-radius: 3px;
            left: 100px;
            right: 60px;
        }
        .funnel-bar {
            position: absolute;
            height: 28px;
            background: linear-gradient(90deg, rgba(110, 159, 255, 0.4), rgba(110, 159, 255, 0.15));
            border-radius: 3px;
            left: 100px;
            transition: width 0.5s;
        }
        .funnel-label {
            width: 95px;
            font-size: 11px;
            color: #8e8ea0;
            text-align: right;
            padding-right: 10px;
            z-index: 1;
        }
        .funnel-value {
            position: absolute;
            right: 0;
            width: 55px;
            text-align: right;
            font-size: 12px;
            font-weight: 600;
            color: #d8d9da;
            z-index: 1;
        }
        .funnel-step { height: 32px; }

        /* Section divider */
        .section-header {
            padding: 6px 12px;
            font-size: 14px;
            font-weight: 600;
            color: #6e9fff;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* AI Report */
        .ai-report {
            background: #1e2028;
            border-radius: 6px;
            padding: 14px;
            font-size: 12px;
            line-height: 1.7;
            border-left: 3px solid #b877d9;
        }
        .ai-report h4 {
            color: #b877d9;
            font-size: 13px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .ai-report ul {
            padding-left: 18px;
            margin: 6px 0;
        }
        .ai-report li { margin: 3px 0; }
        .ai-tag {
            display: inline-block;
            background: rgba(184, 119, 217, 0.15);
            color: #b877d9;
            padding: 1px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: 600;
            margin-left: 8px;
        }

        /* Pipeline Status */
        .pipeline-status {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 4px 0;
        }
        .pipeline-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 6px 10px;
            background: #22252a;
            border-radius: 4px;
        }
        .pipeline-name {
            font-size: 12px;
            font-weight: 500;
        }
        .pipeline-info {
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 11px;
            color: #8e8ea0;
        }
        .pulse {
            width: 8px; height: 8px;
            border-radius: 50%;
            display: inline-block;
        }
        .pulse-green { background: #73bf69; box-shadow: 0 0 6px #73bf69; }
        .pulse-yellow { background: #ffcb47; box-shadow: 0 0 6px #ffcb47; }
        .pulse-red { background: #f2495c; box-shadow: 0 0 6px #f2495c; }

        .row-header {
            background: rgba(110, 159, 255, 0.05);
            border-bottom: 1px solid #2c2d33;
            padding: 4px 0;
        }
    </style>
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="logo">
            <svg viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="28" height="28" rx="4" fill="#F46800"/>
                <path d="M14 5L5 14l9 9 9-9-9-9z" fill="#fff" opacity="0.8"/>
            </svg>
            <span class="title">E-commerce Data Platform</span>
            <span style="color:#8e8ea0; font-size:12px; margin-left: 4px;">/ Overview</span>
        </div>
        <div style="display:flex; gap:10px; align-items:center;">
            <div class="time-range">
                <span class="icon">ğŸ•</span> Last 24 hours
                <span style="color:#8e8ea0; margin-left:4px;">â–¾</span>
            </div>
            <div style="background:#2c2d33; border-radius:4px; padding:5px 10px; font-size:12px; color:#73bf69;">
                â†» 30s
            </div>
        </div>
    </div>

    <div class="dashboard">
        <!-- Section: Key Metrics -->
        <div class="section-header">ğŸ“Š Key Metrics</div>

        <!-- Row 1: Stat Panels -->
        <div class="row row-4">
            <div class="panel stat-panel">
                <div class="panel-header">Events Ingested (24h)</div>
                <div class="panel-body">
                    <div class="stat-value blue">2.84M</div>
                    <div class="stat-label">events processed</div>
                    <div class="stat-trend up">â–² 12.3% vs yesterday</div>
                </div>
            </div>
            <div class="panel stat-panel">
                <div class="panel-header">Pipeline Success Rate</div>
                <div class="panel-body">
                    <div class="stat-value green">99.7%</div>
                    <div class="stat-label">success / total</div>
                    <div class="stat-trend up">â–² 0.2% vs 7d avg</div>
                </div>
            </div>
            <div class="panel stat-panel">
                <div class="panel-header">Data Freshness (SLA)</div>
                <div class="panel-body">
                    <div class="stat-value green">4.2m</div>
                    <div class="stat-label">avg latency (target: &lt;30m)</div>
                    <div class="stat-trend up">â–¼ 1.1m vs last week</div>
                </div>
            </div>
            <div class="panel stat-panel">
                <div class="panel-header">BigQuery Cost (Today)</div>
                <div class="panel-body">
                    <div class="stat-value yellow">$12.40</div>
                    <div class="stat-label">estimated scan cost</div>
                    <div class="stat-trend up">â–¼ 31% after optimization</div>
                </div>
            </div>
        </div>

        <!-- Row 2: Events Throughput + Pipeline Duration -->
        <div class="section-header">ğŸ“ˆ Pipeline Performance</div>
        <div class="row row-2">
            <div class="panel">
                <div class="panel-header">
                    Events Throughput (RPS)
                    <span class="subtitle">event-collector â†’ Pub/Sub</span>
                </div>
                <div class="panel-body">
                    <div class="chart-container">
                        <canvas id="throughputChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="panel">
                <div class="panel-header">
                    Pipeline Execution Duration
                    <span class="subtitle">batch_pipeline / cdc_realtime</span>
                </div>
                <div class="panel-body">
                    <div class="chart-container">
                        <canvas id="durationChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Row 3: Data Quality + Funnel -->
        <div class="section-header">ğŸ” Data Quality & Business Metrics</div>
        <div class="row row-2">
            <div class="panel">
                <div class="panel-header">
                    Data Quality Checks
                    <span class="subtitle">Last run: 2 min ago</span>
                </div>
                <div class="panel-body" style="padding:0;">
                    <table class="quality-table">
                        <thead>
                            <tr>
                                <th>Check</th>
                                <th>Table</th>
                                <th>Value</th>
                                <th>Threshold</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Freshness</td>
                                <td>user_events</td>
                                <td>4.2 min</td>
                                <td>&lt; 30 min</td>
                                <td><span class="badge badge-pass">PASS</span></td>
                            </tr>
                            <tr>
                                <td>Freshness</td>
                                <td>cdc_orders</td>
                                <td>2.8 min</td>
                                <td>&lt; 15 min</td>
                                <td><span class="badge badge-pass">PASS</span></td>
                            </tr>
                            <tr>
                                <td>Volume Z-Score</td>
                                <td>user_events</td>
                                <td>1.34</td>
                                <td>&lt; 2.0</td>
                                <td><span class="badge badge-pass">PASS</span></td>
                            </tr>
                            <tr>
                                <td>Volume Z-Score</td>
                                <td>cdc_orders</td>
                                <td>1.89</td>
                                <td>&lt; 2.0</td>
                                <td><span class="badge badge-warn">WARN</span></td>
                            </tr>
                            <tr>
                                <td>Null Rate (user_id)</td>
                                <td>user_events</td>
                                <td>0.8%</td>
                                <td>&lt; 5%</td>
                                <td><span class="badge badge-pass">PASS</span></td>
                            </tr>
                            <tr>
                                <td>Duplicate Rate</td>
                                <td>user_events</td>
                                <td>0.003%</td>
                                <td>&lt; 1%</td>
                                <td><span class="badge badge-pass">PASS</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="panel">
                <div class="panel-header">
                    Conversion Funnel (7d)
                    <span class="subtitle">All Devices</span>
                </div>
                <div class="panel-body">
                    <div class="funnel">
                        <div class="funnel-step">
                            <div class="funnel-label">Page View</div>
                            <div class="funnel-bar-bg"></div>
                            <div class="funnel-bar" style="width: calc(100% - 160px);"></div>
                            <div class="funnel-value">142,380</div>
                        </div>
                        <div class="funnel-step">
                            <div class="funnel-label">Product View</div>
                            <div class="funnel-bar-bg"></div>
                            <div class="funnel-bar" style="width: calc((100% - 160px) * 0.68);"></div>
                            <div class="funnel-value">96,818</div>
                        </div>
                        <div class="funnel-step">
                            <div class="funnel-label">Add to Cart</div>
                            <div class="funnel-bar-bg"></div>
                            <div class="funnel-bar" style="width: calc((100% - 160px) * 0.31);"></div>
                            <div class="funnel-value">44,138</div>
                        </div>
                        <div class="funnel-step">
                            <div class="funnel-label">Checkout</div>
                            <div class="funnel-bar-bg"></div>
                            <div class="funnel-bar" style="width: calc((100% - 160px) * 0.18);"></div>
                            <div class="funnel-value">25,629</div>
                        </div>
                        <div class="funnel-step">
                            <div class="funnel-label">Purchase</div>
                            <div class="funnel-bar-bg"></div>
                            <div class="funnel-bar" style="width: calc((100% - 160px) * 0.12);"></div>
                            <div class="funnel-value">17,086</div>
                        </div>
                    </div>
                    <div style="margin-top:12px; padding-top:10px; border-top:1px solid #2c2d33; display:flex; justify-content:space-around; text-align:center;">
                        <div>
                            <div style="font-size:18px; font-weight:700; color:#6e9fff;">12.0%</div>
                            <div style="font-size:10px; color:#8e8ea0;">Overall CVR</div>
                        </div>
                        <div>
                            <div style="font-size:18px; font-weight:700; color:#73bf69;">66.7%</div>
                            <div style="font-size:10px; color:#8e8ea0;">Checkout â†’ Purchase</div>
                        </div>
                        <div>
                            <div style="font-size:18px; font-weight:700; color:#ff9830;">â‚©48,200</div>
                            <div style="font-size:10px; color:#8e8ea0;">Avg Order Value</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Row 4: Pipeline Status + AI Report -->
        <div class="section-header">ğŸ¤– AI Quality Agent & Pipeline Status</div>
        <div class="row row-2">
            <div class="panel">
                <div class="panel-header">
                    Pipeline Status
                    <span class="subtitle">Active Pipelines</span>
                </div>
                <div class="panel-body">
                    <div class="pipeline-status">
                        <div class="pipeline-row">
                            <div style="display:flex;align-items:center;gap:8px;">
                                <span class="pulse pulse-green"></span>
                                <span class="pipeline-name">Event Collector</span>
                            </div>
                            <div class="pipeline-info">
                                <span>3 / 10 pods</span>
                                <span>CPU 42%</span>
                                <span style="color:#73bf69">Healthy</span>
                            </div>
                        </div>
                        <div class="pipeline-row">
                            <div style="display:flex;align-items:center;gap:8px;">
                                <span class="pulse pulse-green"></span>
                                <span class="pipeline-name">CDC Realtime</span>
                            </div>
                            <div class="pipeline-info">
                                <span>1 / 1 pod</span>
                                <span>Buffer: 23%</span>
                                <span style="color:#73bf69">Streaming</span>
                            </div>
                        </div>
                        <div class="pipeline-row">
                            <div style="display:flex;align-items:center;gap:8px;">
                                <span class="pulse pulse-green"></span>
                                <span class="pipeline-name">Batch ETL (Daily)</span>
                            </div>
                            <div class="pipeline-info">
                                <span>Last: 03:42 KST</span>
                                <span>Duration: 8m 24s</span>
                                <span style="color:#73bf69">Completed</span>
                            </div>
                        </div>
                        <div class="pipeline-row">
                            <div style="display:flex;align-items:center;gap:8px;">
                                <span class="pulse pulse-green"></span>
                                <span class="pipeline-name">Beam/Dataflow</span>
                            </div>
                            <div class="pipeline-info">
                                <span>2 workers</span>
                                <span>Backlog: 0</span>
                                <span style="color:#73bf69">Running</span>
                            </div>
                        </div>
                        <div class="pipeline-row">
                            <div style="display:flex;align-items:center;gap:8px;">
                                <span class="pulse pulse-yellow"></span>
                                <span class="pipeline-name">Quality Agent</span>
                            </div>
                            <div class="pipeline-info">
                                <span>CronJob</span>
                                <span>Next: 12:30 KST</span>
                                <span style="color:#ffcb47">Scheduled</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel">
                <div class="panel-header">
                    GenAI Quality Report
                    <span class="ai-tag">Gemini 2.0 Flash</span>
                </div>
                <div class="panel-body">
                    <div class="ai-report">
                        <h4>ğŸ¤– AI Analysis Summary</h4>
                        <p><strong>cdc_orders í…Œì´ë¸” ë³¼ë¥¨ ê²½ê³  (z-score: 1.89)</strong></p>
                        <p style="margin-top:6px;">ì£¼ë¬¸ëŸ‰ì´ 14ì¼ í‰ê·  ëŒ€ë¹„ <span style="color:#ff9830;">ì•½ 32% ì¦ê°€</span>í•œ ê²ƒìœ¼ë¡œ ê´€ì¸¡ë©ë‹ˆë‹¤. í•´ë‹¹ ì‹œì ì˜ í”„ë¡œëª¨ì…˜ ì´ë²¤íŠ¸(ì„¤ ì—°íœ´ í• ì¸)ì— ë”°ë¥¸ ì •ìƒì ì¸ íŠ¸ë˜í”½ ì¦ê°€ë¡œ íŒë‹¨ë©ë‹ˆë‹¤.</p>

                        <h4 style="margin-top:14px;">ğŸ’¡ ê¶Œì¥ ì¡°ì¹˜</h4>
                        <ul>
                            <li>í”„ë¡œëª¨ì…˜ ê¸°ê°„ ë™ì•ˆ volume anomaly thresholdë¥¼ <strong>z-score 3.0</strong>ìœ¼ë¡œ ì„ì‹œ ìƒí–¥ ì¡°ì •</li>
                            <li>CDC Pipeline ë²„í¼ í¬ê¸°ë¥¼ 100â†’200ìœ¼ë¡œ ì¦ì„¤í•˜ì—¬ ì²˜ë¦¬ëŸ‰ í™•ë³´</li>
                            <li>BigQuery Streaming Insert quota ëª¨ë‹ˆí„°ë§ ê°•í™”</li>
                        </ul>

                        <h4 style="margin-top:14px;">ğŸ“Š ë¹„ì¦ˆë‹ˆìŠ¤ ì˜í–¥ë„</h4>
                        <p>í˜„ì¬ ë°ì´í„° ì§€ì—° ì—†ì´ ì •ìƒ ì²˜ë¦¬ ì¤‘. SLA ìœ„ë°˜ ê°€ëŠ¥ì„±: <span class="green">ë‚®ìŒ</span></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Row 5: BigQuery Cost + HPA Scaling -->
        <div class="section-header">ğŸ’° Cost Optimization & Auto-Scaling</div>
        <div class="row row-2">
            <div class="panel">
                <div class="panel-header">
                    BigQuery Daily Cost Trend
                    <span class="subtitle">Scan cost (on-demand pricing)</span>
                </div>
                <div class="panel-body">
                    <div class="chart-container">
                        <canvas id="costChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="panel">
                <div class="panel-header">
                    HPA Pod Auto-Scaling
                    <span class="subtitle">event-collector replicas</span>
                </div>
                <div class="panel-body">
                    <div class="chart-container">
                        <canvas id="hpaChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Row 6: DAU + CDC Lag -->
        <div class="section-header">ğŸ‘¥ User Analytics & CDC Monitoring</div>
        <div class="row row-2">
            <div class="panel">
                <div class="panel-header">
                    Daily Active Users (30d)
                    <span class="subtitle">staging.user_events</span>
                </div>
                <div class="panel-body">
                    <div class="chart-container tall">
                        <canvas id="dauChart"></canvas>
                    </div>
                </div>
            </div>
            <div class="panel">
                <div class="panel-header">
                    CDC Replication Lag
                    <span class="subtitle">PostgreSQL â†’ BigQuery (seconds)</span>
                </div>
                <div class="panel-body">
                    <div class="chart-container tall">
                        <canvas id="cdcLagChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    // â”€â”€â”€ Color Palette â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const colors = {
        blue: '#6e9fff',
        green: '#73bf69',
        red: '#f2495c',
        yellow: '#ffcb47',
        orange: '#ff9830',
        purple: '#b877d9',
        cyan: '#50c6db',
        blueFill: 'rgba(110, 159, 255, 0.1)',
        greenFill: 'rgba(115, 191, 105, 0.1)',
        redFill: 'rgba(242, 73, 92, 0.1)',
        purpleFill: 'rgba(184, 119, 217, 0.1)',
    };

    const defaultOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                labels: { color: '#8e8ea0', font: { size: 11 }, boxWidth: 12, padding: 12 },
            },
        },
        scales: {
            x: {
                ticks: { color: '#6c6c80', font: { size: 10 } },
                grid: { color: 'rgba(255,255,255,0.04)' },
            },
            y: {
                ticks: { color: '#6c6c80', font: { size: 10 } },
                grid: { color: 'rgba(255,255,255,0.06)' },
            },
        },
    };

    // â”€â”€â”€ Helper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function timeLabels(count, startHour = 0) {
        return Array.from({length: count}, (_, i) => {
            const h = (startHour + i) % 24;
            return `${String(h).padStart(2,'0')}:00`;
        });
    }
    function dateLabels(count) {
        const d = new Date(2026, 1, 12);
        return Array.from({length: count}, (_, i) => {
            const dt = new Date(d);
            dt.setDate(dt.getDate() - (count - 1 - i));
            return `${dt.getMonth()+1}/${dt.getDate()}`;
        });
    }

    // â”€â”€â”€ Throughput Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    new Chart(document.getElementById('throughputChart'), {
        type: 'line',
        data: {
            labels: timeLabels(24, 0),
            datasets: [{
                label: 'Events/sec',
                data: [320,290,180,120,85,72,68,95,180,420,680,820,950,1100,980,870,920,1050,1180,1020,780,620,480,380],
                borderColor: colors.blue,
                backgroundColor: colors.blueFill,
                fill: true,
                tension: 0.4,
                pointRadius: 0,
                borderWidth: 2,
            }, {
                label: 'HPA Threshold (1000 RPS)',
                data: Array(24).fill(1000),
                borderColor: colors.red,
                borderDash: [5, 5],
                pointRadius: 0,
                borderWidth: 1,
            }],
        },
        options: {
            ...defaultOptions,
            scales: {
                ...defaultOptions.scales,
                y: { ...defaultOptions.scales.y, beginAtZero: true, title: { display: true, text: 'RPS', color: '#6c6c80', font: { size: 10 } } },
            },
        },
    });

    // â”€â”€â”€ Duration Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    new Chart(document.getElementById('durationChart'), {
        type: 'bar',
        data: {
            labels: dateLabels(7),
            datasets: [{
                label: 'Batch ETL',
                data: [520, 498, 512, 504, 495, 510, 504],
                backgroundColor: colors.blue,
                borderRadius: 3,
            }, {
                label: 'CDC (avg flush)',
                data: [3.2, 3.5, 2.8, 3.1, 3.4, 2.9, 3.0],
                backgroundColor: colors.green,
                borderRadius: 3,
            }],
        },
        options: {
            ...defaultOptions,
            scales: {
                ...defaultOptions.scales,
                y: { ...defaultOptions.scales.y, title: { display: true, text: 'seconds', color: '#6c6c80', font: { size: 10 } } },
            },
        },
    });

    // â”€â”€â”€ BigQuery Cost Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    new Chart(document.getElementById('costChart'), {
        type: 'line',
        data: {
            labels: dateLabels(14),
            datasets: [{
                label: 'Before Optimization',
                data: [18.2, 19.1, 17.8, 20.3, 22.1, 19.5, 18.8, null, null, null, null, null, null, null],
                borderColor: colors.red,
                backgroundColor: colors.redFill,
                fill: true,
                tension: 0.3,
                pointRadius: 3,
                borderWidth: 2,
                spanGaps: false,
            }, {
                label: 'After Optimization',
                data: [null, null, null, null, null, null, null, 14.2, 13.5, 12.8, 13.1, 12.9, 12.6, 12.4],
                borderColor: colors.green,
                backgroundColor: colors.greenFill,
                fill: true,
                tension: 0.3,
                pointRadius: 3,
                borderWidth: 2,
                spanGaps: false,
            }],
        },
        options: {
            ...defaultOptions,
            plugins: {
                ...defaultOptions.plugins,
                annotation: {
                    annotations: {
                        line1: { type: 'line', xMin: 6.5, xMax: 6.5, borderColor: colors.yellow, borderDash: [5,5], borderWidth: 1 },
                    },
                },
            },
            scales: {
                ...defaultOptions.scales,
                y: { ...defaultOptions.scales.y, title: { display: true, text: 'USD ($)', color: '#6c6c80', font: { size: 10 } } },
            },
        },
    });

    // â”€â”€â”€ HPA Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    new Chart(document.getElementById('hpaChart'), {
        type: 'line',
        data: {
            labels: timeLabels(24, 0),
            datasets: [{
                label: 'Pods',
                data: [2,2,2,2,2,2,2,2,3,4,5,6,7,8,7,6,7,8,9,7,5,4,3,2],
                borderColor: colors.purple,
                backgroundColor: colors.purpleFill,
                fill: true,
                tension: 0.4,
                pointRadius: 2,
                borderWidth: 2,
                stepped: false,
            }, {
                label: 'Min (2)',
                data: Array(24).fill(2),
                borderColor: 'rgba(115,191,105,0.4)',
                borderDash: [4,4],
                pointRadius: 0,
                borderWidth: 1,
            }, {
                label: 'Max (10)',
                data: Array(24).fill(10),
                borderColor: 'rgba(242,73,92,0.4)',
                borderDash: [4,4],
                pointRadius: 0,
                borderWidth: 1,
            }],
        },
        options: {
            ...defaultOptions,
            scales: {
                ...defaultOptions.scales,
                y: { ...defaultOptions.scales.y, min: 0, max: 12, title: { display: true, text: 'Replicas', color: '#6c6c80', font: { size: 10 } } },
            },
        },
    });

    // â”€â”€â”€ DAU Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    new Chart(document.getElementById('dauChart'), {
        type: 'line',
        data: {
            labels: dateLabels(30),
            datasets: [{
                label: 'DAU',
                data: [
                    12400,13100,12800,14200,15600,16800,17200,
                    13500,14100,13800,15000,16200,17100,17800,
                    14200,14800,14500,15800,17000,18200,18800,
                    15100,15600,15200,16500,17800,19100,19800,
                    16200,16800
                ],
                borderColor: colors.cyan,
                backgroundColor: 'rgba(80, 198, 219, 0.08)',
                fill: true,
                tension: 0.4,
                pointRadius: 1,
                borderWidth: 2,
            }, {
                label: '7d Moving Avg',
                data: [
                    null,null,null,null,null,null,14586,
                    14771,14957,14929,15114,15257,15371,15529,
                    15343,15386,15343,15529,15729,15886,16057,
                    16014,16100,16057,16243,16486,16743,16943,
                    17057,17186
                ],
                borderColor: colors.orange,
                borderDash: [5,3],
                pointRadius: 0,
                borderWidth: 1.5,
                tension: 0.4,
            }],
        },
        options: {
            ...defaultOptions,
            scales: {
                ...defaultOptions.scales,
                y: { ...defaultOptions.scales.y, title: { display: true, text: 'Users', color: '#6c6c80', font: { size: 10 } } },
                x: { ...defaultOptions.scales.x, ticks: { ...defaultOptions.scales.x.ticks, maxRotation: 45, autoSkip: true, maxTicksLimit: 10 } },
            },
        },
    });

    // â”€â”€â”€ CDC Lag Chart â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    new Chart(document.getElementById('cdcLagChart'), {
        type: 'line',
        data: {
            labels: timeLabels(24, 0),
            datasets: [{
                label: 'Replication Lag',
                data: [1.2,1.1,0.8,0.6,0.5,0.4,0.5,0.8,1.5,2.2,3.1,3.8,4.2,4.8,3.9,3.2,3.5,4.1,4.5,3.8,2.9,2.1,1.6,1.3],
                borderColor: colors.orange,
                backgroundColor: 'rgba(255,152,48,0.08)',
                fill: true,
                tension: 0.4,
                pointRadius: 1,
                borderWidth: 2,
            }, {
                label: 'SLA Limit (10s)',
                data: Array(24).fill(10),
                borderColor: colors.red,
                borderDash: [5,5],
                pointRadius: 0,
                borderWidth: 1,
            }],
        },
        options: {
            ...defaultOptions,
            scales: {
                ...defaultOptions.scales,
                y: { ...defaultOptions.scales.y, min: 0, title: { display: true, text: 'Seconds', color: '#6c6c80', font: { size: 10 } } },
            },
        },
    });
    </script>
</body>
</html>
